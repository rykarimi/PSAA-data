clc;clear all;
n=10;
% d = 5*rand(n,1); % The diagonal values
%    t = triu(bsxfun(@min,d,d.').*rand(n),1); % The upper trianglar random values
%    M = diag(d)+t+t.' % Put them together in a symmetric matrix

% A=[];
A0=eye(n);
gamma=50;

A(:,:,1)=[4.1853    1.6902    3.5941    1.7973    1.3220    0.7750    0.0390    1.3757    0.5786    0.2198
    1.6902    4.8554    3.3391    0.7890    0.0851    1.1875    0.0638    3.1119    2.4226    1.7737
    3.5941    3.3391    4.2319    0.7374    0.8152    0.4995    0.9537    4.1254    0.6072    2.7318
    1.7973    0.7890    0.7374    2.5300    0.3975    1.6988    0.5347    0.1922    2.5107    0.4902
    1.3220    0.0851    0.8152    0.3975    1.3944    0.7962    0.4533    0.8185    1.1187    0.6029
    0.7750    1.1875    0.4995    1.6988    0.7962    3.7331    0.9355    1.5451    1.3157    2.2485
    0.0390    0.0638    0.9537    0.5347    0.4533    0.9355    1.1847    0.3662    0.8634    0.0464
    1.3757    3.1119    4.1254    0.1922    0.8185    1.5451    0.3662    4.7867    1.5455    2.8402
    0.5786    2.4226    0.6072    2.5107    1.1187    1.3157    0.8634    1.5455    3.1013    2.2920
    0.2198    1.7737    2.7318    0.4902    0.6029    2.2485    0.0464    2.8402    2.2920    3.0013
    ];
A(:,:,2)=[0.9192    0.0473    0.7362    0.3004    0.8063    0.3470    0.0086    0.3255    0.7880    0.8432
    0.0473    2.4897    0.3548    2.1918    1.9541    1.8299    2.2782    1.5746    2.3991    0.3874
    0.7362    0.3548    2.5892    1.2198    1.2039    2.4704    1.6642    0.8810    1.2659    1.7157
    0.3004    2.1918    1.2198    4.9712    3.4791    2.6120    0.0048    0.8808    1.0299    1.3851
    0.8063    1.9541    1.2039    3.4791    4.2743    2.3086    0.1031    0.0993    0.9669    1.0388
    0.3470    1.8299    2.4704    2.6120    2.3086    4.8120    0.7077    0.1001    2.5094    2.1199
    0.0086    2.2782    1.6642    0.0048    0.1031    0.7077    3.3947    0.1838    2.5871    0.9423
    0.3255    1.5746    0.8810    0.8808    0.0993    0.1001    0.1838    2.0175    0.7012    0.3611
    0.7880    2.3991    1.2659    1.0299    0.9669    2.5094    2.5871    0.7012    4.6749    1.5184
    0.8432    0.3874    1.7157    1.3851    1.0388    2.1199    0.9423    0.3611    1.5184    2.3974
    ];
A(:,:,3)=[1.6907    0.4102    0.2833    1.1550    1.3972    1.4574    1.3534    0.6579    0.8462    0.7535
    0.4102    4.1617    1.3875    4.0040    2.3866    1.0958    0.2870    0.7442    1.6242    3.3618
    0.2833    1.3875    2.7629    1.2101    2.1898    1.7668    2.2442    1.6577    0.2491    0.5421
    1.1550    4.0040    1.2101    4.7877    1.4689    0.3631    2.2979    0.9932    2.8171    1.2103
    1.3972    2.3866    2.1898    1.4689    4.4642    1.4745    0.9685    1.4729    2.7540    1.9250
    1.4574    1.0958    1.7668    0.3631    1.4745    1.7825    0.7666    0.4790    0.7825    0.6022
    1.3534    0.2870    2.2442    2.2979    0.9685    0.7666    2.7320    1.0787    2.1357    2.1815
    0.6579    0.7442    1.6577    0.9932    1.4729    0.4790    1.0787    1.7334    0.2574    1.7117
    0.8462    1.6242    0.2491    2.8171    2.7540    0.7825    2.1357    0.2574    3.1140    0.4953
    0.7535    3.3618    0.5421    1.2103    1.9250    0.6022    2.1815    1.7117    0.4953    3.9831
    ];
A(:,:,4)=[3.5112    1.6922    1.8374    0.8065    2.4329    0.8086    0.9060    1.4278    3.3069    0.8233
    1.6922    1.8774    0.4879    0.2139    1.1326    1.0887    1.0347    0.6260    0.0322    0.3378
    1.8374    0.4879    4.8685    1.5116    2.5209    2.5939    1.6184    0.1867    4.0363    2.5912
    0.8065    0.2139    1.5116    4.8615    0.3667    2.5798    1.4083    2.3410    3.0462    0.1907
    2.4329    1.1326    2.5209    0.3667    3.2185    1.4433    1.7527    1.6013    1.7340    1.6255
    0.8086    1.0887    2.5939    2.5798    1.4433    4.3005    0.1049    0.6317    2.7975    1.7824
    0.9060    1.0347    1.6184    1.4083    1.7527    0.1049    2.0094    0.8584    1.4601    1.3087
    1.4278    0.6260    0.1867    2.3410    1.6013    0.6317    0.8584    3.1597    0.2986    2.4187
    3.3069    0.0322    4.0363    3.0462    1.7340    2.7975    1.4601    0.2986    4.9262    0.1565
    0.8233    0.3378    2.5912    0.1907    1.6255    1.7824    1.3087    2.4187    0.1565    2.7974
    ];
A(:,:,5)=[4.8519    0.0425    1.4042    3.1987    0.4283    0.1594    1.6051    1.7143    0.1653    1.4429
    0.0425    0.6193    0.0696    0.1222    0.1898    0.5603    0.3754    0.2146    0.5084    0.0524
    1.4042    0.0696    2.3371    0.2598    0.1532    0.3061    0.5012    0.1782    0.8522    1.7151
    3.1987    0.1222    0.2598    3.2835    0.8616    2.7375    1.4509    1.0932    0.0215    1.0901
    0.4283    0.1898    0.1532    0.8616    1.4509    1.1614    1.4352    0.5322    1.1970    1.2184
    0.1594    0.5603    0.3061    2.7375    1.1614    3.7727    1.3672    1.5817    0.6885    1.4009
    1.6051    0.3754    0.5012    1.4509    1.4352    1.3672    2.7906    1.1224    0.7275    2.3112
    1.7143    0.2146    0.1782    1.0932    0.5322    1.5817    1.1224    2.1390    0.8102    0.3776
    0.1653    0.5084    0.8522    0.0215    1.1970    0.6885    0.7275    0.8102    1.3360    0.1730
    1.4429    0.0524    1.7151    1.0901    1.2184    1.4009    2.3112    0.3776    0.1730    3.7687
    ];
A(:,:,6)=[0.2204    0.0067    0.0789    0.1887    0.1498    0.0928    0.0152    0.1154    0.0003    0.0745
    0.0067    3.4336    1.6790    1.2770    0.2595    0.1951    0.3661    0.6577    0.0024    1.4011
    0.0789    1.6790    3.6689    0.8166    1.6303    2.1490    1.4704    1.5494    0.0686    0.5550
    0.1887    1.2770    0.8166    2.1859    0.3795    0.3807    1.3899    0.8341    0.2044    0.2252
    0.1498    0.2595    1.6303    0.3795    1.8992    1.3838    1.4757    1.0781    0.0179    0.8278
    0.0928    0.1951    2.1490    0.3807    1.3838    4.8983    1.0013    1.9541    0.3325    1.3965
    0.0152    0.3661    1.4704    1.3899    1.4757    1.0013    1.9950    1.6817    0.2674    0.6265
    0.1154    0.6577    1.5494    0.8341    1.0781    1.9541    1.6817    2.2009    0.4244    1.1341
    0.0003    0.0024    0.0686    0.2044    0.0179    0.3325    0.2674    0.4244    0.7840    0.4923
    0.0745    1.4011    0.5550    0.2252    0.8278    1.3965    0.6265    1.1341    0.4923    1.6302
    ];
A(:,:,7)=[2.3681    2.0403    0.0059    0.0142    1.9665    0.5726    2.2335    2.2818    0.0604    2.2665
    2.0403    4.7485    0.2600    0.8518    0.2132    1.9110    1.4107    1.7556    1.9665    1.2792
    0.0059    0.2600    0.4175    0.3999    0.1472    0.3579    0.3367    0.2371    0.3757    0.2665
    0.0142    0.8518    0.3999    1.3991    0.8303    0.1180    0.8414    0.4183    0.7333    0.4799
    1.9665    0.2132    0.1472    0.8303    2.2350    2.1727    1.7648    0.5724    0.2629    0.4838
    0.5726    1.9110    0.3579    0.1180    2.1727    2.9379    2.3479    2.0794    0.3889    2.3097
    2.2335    1.4107    0.3367    0.8414    1.7648    2.3479    4.3882    1.0480    1.5443    2.6978
    2.2818    1.7556    0.2371    0.4183    0.5724    2.0794    1.0480    2.3455    1.8183    0.6540
    0.0604    1.9665    0.3757    0.7333    0.2629    0.3889    1.5443    1.8183    2.1871    1.2738
    2.2665    1.2792    0.2665    0.4799    0.4838    2.3097    2.6978    0.6540    1.2738    3.7309
    ];
A(:,:,8)=[4.6735    3.6762    1.6182    0.2532    4.2105    0.1314    0.3013    0.0189    3.8204    1.0809
    3.6762    4.0894    2.3686    2.6542    1.5919    0.1664    0.1837    0.0015    2.2348    0.5410
    1.6182    2.3686    3.5445    1.0917    0.4152    0.1617    1.5203    0.0214    1.6797    0.4903
    0.2532    2.6542    1.0917    3.7161    0.8934    0.2125    1.4719    0.0200    1.8452    2.1128
    4.2105    1.5919    0.4152    0.8934    4.4985    0.2426    1.6792    0.0122    1.2793    1.8436
    0.1314    0.1664    0.1617    0.2125    0.2426    0.3262    0.2819    0.0094    0.3102    0.1728
    0.3013    0.1837    1.5203    1.4719    1.6792    0.2819    1.6796    0.0073    1.6493    1.3925
    0.0189    0.0015    0.0214    0.0200    0.0122    0.0094    0.0073    0.0217    0.0111    0.0111
    3.8204    2.2348    1.6797    1.8452    1.2793    0.3102    1.6493    0.0111    4.1405    1.4004
    1.0809    0.5410    0.4903    2.1128    1.8436    0.1728    1.3925    0.0111    1.4004    2.5372
    ];
A(:,:,9)=[2.9391    0.0221    0.1777    2.9007    1.0298    0.7531    0.3633    2.7109    0.6911    0.5597
    0.0221    0.7138    0.0989    0.0600    0.3416    0.3328    0.3694    0.0383    0.1805    0.5142
    0.1777    0.0989    0.2611    0.0654    0.1534    0.0680    0.1637    0.1376    0.2003    0.1204
    2.9007    0.0600    0.0654    3.4165    0.4437    0.6252    1.8550    0.3743    0.1384    0.0580
    1.0298    0.3416    0.1534    0.4437    3.0428    0.2732    1.3488    1.1567    1.9027    0.3599
    0.7531    0.3328    0.0680    0.6252    0.2732    1.0983    0.4274    0.8927    0.6812    0.1195
    0.3633    0.3694    0.1637    1.8550    1.3488    0.4274    2.0314    0.4959    1.5168    0.3392
    2.7109    0.0383    0.1376    0.3743    1.1567    0.8927    0.4959    3.1495    2.7134    0.2265
    0.6911    0.1805    0.2003    0.1384    1.9027    0.6812    1.5168    2.7134    2.7765    0.2008
    0.5597    0.5142    0.1204    0.0580    0.3599    0.1195    0.3392    0.2265    0.2008    0.6379
    ];
A(:,:,10)=[1.5215    0.3656    0.4316    0.3291    0.1800    0.5395    1.0783    0.0824    0.8751    0.6710
    0.3656    1.4543    0.4800    1.4199    0.0568    0.3518    1.4440    0.8856    1.0922    0.7256
    0.4316    0.4800    1.2126    0.7193    0.7254    0.6794    0.1970    0.9425    0.1862    1.0561
    0.3291    1.4199    0.7193    4.6834    2.5991    1.2170    0.2722    1.4437    0.8734    0.9752
    0.1800    0.0568    0.7254    2.5991    4.3010    0.5974    2.1882    0.0784    0.3524    0.9013
    0.5395    0.3518    0.6794    1.2170    0.5974    1.9861    0.9566    1.9670    1.6894    0.2412
    1.0783    1.4440    0.1970    0.2722    2.1882    0.9566    2.3971    1.2008    0.8099    0.7427
    0.0824    0.8856    0.9425    1.4437    0.0784    1.9670    1.2008    2.8250    0.6737    1.2949
    0.8751    1.0922    0.1862    0.8734    0.3524    1.6894    0.8099    0.6737    2.4481    0.8041
    0.6710    0.7256    1.0561    0.9752    0.9013    0.2412    0.7427    1.2949    0.8041    1.3491
    ];
O=zeros(n,n);

ARR=[gamma*A0 A(:,:,1) A(:,:,2) A(:,:,3) A(:,:,4) A(:,:,5) A(:,:,6) A(:,:,7) A(:,:,8) A(:,:,9) A(:,:,10)
    A(:,:,1) gamma*A0 O O O O O O O O O
    A(:,:,2) O gamma*A0 O O O O O O O O
    A(:,:,3) O O gamma*A0 O O O O O O O
    A(:,:,4) O O O gamma*A0 O O O O O O
    A(:,:,5) O O O O gamma*A0 O O O O O
    A(:,:,6) O O O O O gamma*A0 O O O O 
    A(:,:,7) O O O O O O gamma*A0 O O O
    A(:,:,8) O O O O O O O gamma*A0 O O
    A(:,:,9) O O O O O O O O gamma*A0 O
    A(:,:,10) O O O O O O O O O gamma*A0
    ];
[~,p] = chol(ARR); % The CHOL function provides an optional second output argument "p" which is zero
% if the matrix is found to be positive definite. 
% If the input matrix is not positive definite, then "p" will be a positive integer 
% in this case, by changing gamma to 50, it became positive definite
A0=gamma*A0;

save('matrixAs.mat')